<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Landing Page Concept</title>
    <link rel="stylesheet" href="styles/style.css">

    </script>

    <!--
    <script src="https://unpkg.com/ionicons@4.5.5/dist/ionicons.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.0.2/TweenMax.min.js"></script>

    -->

</head>

<body>
    <div id="searchContainer">
        <input class="searchControl" type="text" placeholder="City Name or Zipcode" id="searchInput">
        <a href="#" class="btn" onclick="begin()">Continue &raquo</a>
        <!--
        <button class="searchControl" id="searchBtn">Search</button>
        -->
    </div>
    <div id="weatherContainer">
        <div id="weatherDescription">
            <h1 id="cityHeader"></h1>
            <div id="weatherMain">
                <div id="temperature"></div>
                <div id="weatherDescriptionHeader"></div>
                <div><img id="documentIconImg"></div>
            </div>
            <hr>
            <div id="windSpeed" class="bottomDetails"></div>
            <div id="humidity" class="bottomDetails"></div>
        </div>
    </div>
    <div id="section">
        <ul id="result"></ul>
    </div>
    <!--
    <div class="temp">
        <div class="firstBlock"></div>
        <div class="secondBlock"></div>
        <div class="loader">
            <ul>
                <li>V</li>
                <li>E</li>
                <li>R</li>
                <li>G</li>
                <li>A</li>
                <li>R</li>
                <li>A</li>
                <li> </li>
                <li>J</li>
                <li>A</li>
                <li>M</li>
                <li>E</li>
                <li>S</li>

            </ul>
        </div>
    </div>
    <div class="thirdBlock"></div>
    <div class="menu">
        <ion-icon name="menu"></ion-icon>
    </div>
    <div class="logo">
        <span>CIT 261 - Web Mobile Application</span><br>
        <span>James Vergara Rincon</span><br>
        <span>Weather Page</span>
    </div>
    <div class="content">
        <div class="heading">
            <span>Faroe Islands</span>
        </div>
        <div class="desc">
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Laudantium omnis nostrum eum, ipsa quia voluptatem. Quia ut, iste ad obcaecati doloremque voluptas porro at maiores eaque?</p>
        </div>
        <div class="link">
            <button type="button">VISIT NOW</button>
        </div>
    </div>
    <div class="img">
        <img src="1-whytheweathe.jpg" alt="">
    </div>
    <div class="media">
        <ul>
            <li>
                <ion-icon name="logo-facebook"></ion-icon>
            </li>
            <li>
                <ion-icon name="logo-instagram"></ion-icon>
            </li>
            <li>
                <ion-icon name="logo-twitter"></ion-icon>
            </li>
        </ul>
    </div>
    <div class="watch">
        <ion-icon name="play"></ion-icon>
    </div>

    <script type="text/javascript">
        TweenMax.from(".logo", 1.6, {
            delay: 6.4,
            opacity: 0,
            y: 30,
            ease: Expo.easeInOut
        });

        TweenMax.from(".menu", 1.6, {
            delay: 6.5,
            opacity: 0,
            y: 30,
            ease: Expo.easeInOut
        });

        TweenMax.from(".heading", 1.6, {
            delay: 6.6,
            opacity: 0,
            y: 30,
            ease: Expo.easeInOut
        });

        TweenMax.from(".desc", 1.6, {
            delay: 6.7,
            opacity: 0,
            y: 30,
            ease: Expo.easeInOut
        });

        TweenMax.from("button", 1.6, {
            delay: 6.8,
            opacity: 0,
            y: 30,
            ease: Expo.easeInOut
        });

        TweenMax.from(".watch", 1.6, {
            delay: 6.9,
            opacity: 0,
            y: 30,
            rotation: 90,
            ease: Expo.easeInOut
        });

        TweenMax.staggerFrom(".media ul li", 2, {
            delay: 7,
            opacity: 0,
            y: 40,
            ease: Expo.easeInOut
        }, 0.2);
    </script>
    -->
    <script>
        function begin() {
            /*  const url = `https://api.openweathermap.org/data/2.5/weather?q=${this.city},${this.countryCode}&appid=${this.apiKey}&units=metric`; */
            getdata();
        }

        function getdata() {
            const apiKey = 'f7ee9df4b712457a78edab4465753b2a';
            /*
            const city = document.getElementById('city').value;
            const countryCode = document.getElementById('countryCode').value
                /* instruction from https://openweathermap.org/current */
            /* api.openweathermap.org/data/2.5/weather?q={city name},{country code} */

            const city = "Bogota";
            const countryCode = "CO";

            const url = `https://api.openweathermap.org/data/2.5/weather?q=${city},${countryCode}&appid=${apiKey}&units=metric`;
            const api = new XMLHttpRequest();
            /* from w3school.com https://www.w3schools.com/xml/xml_http.asp */
            api.open("GET", url, true);
            api.send();

            api.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    console.log(this.responseText);
                    /* convert the information to JSON */
                    let data = JSON.parse(this.responseText);
                    console.log(data.country);
                    let result = document.querySelector("#result");

                    /* result begin with empty value */
                    result.innerHTML = " ";
                    result.innerHTML += ` <li> <h3>City: ${data.name}, ${data.sys.country}</h3> <br> 
             Temperature: ${data.main.temp} °C <br>
             Temp Min: ${data.main.temp_min} °C  -  Temp Max: ${data.main.temp_max} °C  <br>
             Weather: ${data.weather[0].main} - ${data.weather[0].description} <br>
             WindSpeed: ${data.wind.speed} <br> Pressure: ${data.main.pressure} hpa <br>
             Humity: ${data.main.humidity} % <br>
             Geo [long: ${data.coord.lon}, Lat: ${data.coord.lat}]
             </li>`;

                };
            }
        }
    </script>

</body>

</html>